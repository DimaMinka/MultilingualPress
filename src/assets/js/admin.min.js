!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}var f=a("./admin/core/functions"),g=e(f),h=a("./admin/core/common"),i=a("./admin/core/Controller"),j=d(i),k=a("./admin/nav-menus/NavMenuItem"),l=d(k),m=a("./admin/nav-menus/NavMenus"),n=d(m),o=a("./admin/network/AddNewSite"),p=d(o),q=a("./admin/term-translation/TermTranslator"),r=d(q),s=a("./admin/user-settings/UserBackEndLanguage"),t=d(s),u=window.ajaxurl,v=window.MultilingualPressAdmin={},w=new h.Toggler({el:"body",events:{"click .mlp-click-toggler":"toggleElement"}});v.toggler=w,w.initializeStateTogglers();var x=new j["default"];v.controller=x;var y=void 0;y=g.getSettings(n["default"]),x.registerModule("nav-menus.php",n["default"],{el:"#"+y.metaBoxID,events:{"click #submit-mlp-language":"sendRequest"},model:new l["default"]({urlRoot:u}),moduleSettings:y}),x.registerModule("network/site-new.php",p["default"],{el:"#wpbody-content form",events:{"change #site-language":"adaptLanguage","change #mlp-base-site-id":"togglePluginsRow"}}),x.registerModule("edit-tags.php",r["default"],{el:"#mlp-term-translations",events:{"change select":"propagateSelectedTerm"}}),x.registerModule("options-general.php",t["default"],{el:"#WPLANG",moduleSettings:g.getSettings(t["default"])},function(a){return a.updateSiteLanguage()}),jQuery(x.initialize)},{"./admin/core/Controller":2,"./admin/core/common":4,"./admin/core/functions":5,"./admin/nav-menus/NavMenuItem":6,"./admin/nav-menus/NavMenus":7,"./admin/network/AddNewSite":8,"./admin/term-translation/TermTranslator":9,"./admin/user-settings/UserBackEndLanguage":10}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var g=a("./functions"),h=e(g),i=a("./Router"),j=d(i),k=window.jQuery,l=window._,m=h.getSettings("mlpSettings"),n={},o={},p=new j["default"],q=function(a,b){o[b]||(o[b]=[]),o[b].push(a)},r=function(){k.each(o,function(a,b){p.route(a,a,function(){k.each(b,function(a,b){var c=b.Constructor,d=new c(b.options);n[c.name]=d,b.callback&&b.callback(d)})})})},s=function(){return Backbone.History.started?!1:(Backbone.history.start({root:m.urlRoot,pushState:!0,hashChange:!1}),!0)},t=function(){function a(){f(this,a),this.modules=n}return a.prototype.registerModule=function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d=arguments.length<=3||void 0===arguments[3]?null:arguments[3],e={Constructor:b,options:c,callback:d};k.each(l.isArray(a)?a:[a],function(a,b){q(e,b)})},a.prototype.initialize=function(){r(),s()},a}();c["default"]=t},{"./Router":3,"./functions":5}],3:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return d(this,b),e(this,a.call(this,c))}return f(b,a),b}(Backbone.Router);c["default"]=g},{}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=window.jQuery;c.Toggler=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return d(this,b),e(this,a.call(this,c))}return f(b,a),b.prototype.initializeStateTogglers=function(){var a=this;g(".mlp-state-toggler").each(function(b,c){var d=g(c);g('[name="'+d.attr("name")+'"]').on("change",{$toggler:d},a.toggleElementIfChecked)})},b.prototype.toggleElement=function(a){var b=g(a.target).data("toggle-target");return b?(g(b).toggle(),!0):!1},b.prototype.toggleElementIfChecked=function(a){var b=a.data.$toggler,c=b.data("toggle-target");return c?(g(c).toggle(b.is(":checked")),!0):!1},b}(Backbone.View)},{}],5:[function(a,b,c){"use strict";c.__esModule=!0;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},e=function(a){switch("undefined"==typeof a?"undefined":d(a)){case"function":return a.name;case"string":return a;case"object":return a.constructor.name}return""};c.getSettings=function(a){return a=e(a),"undefined"!=typeof window["mlp"+a+"Settings"]?window["mlp"+a+"Settings"]:"undefined"!=typeof window[a]?window[a]:{}}},{}],6:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];d(this,b);var f=e(this,a.call(this,c));return f.urlRoot=c.urlRoot,f}return f(b,a),b}(Backbone.Model);c["default"]=g},{}],7:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=window.jQuery,h=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];d(this,b);var f=e(this,a.call(this,c));return f.$languages=f.$el.find('li [type="checkbox"]'),f.$menu=g("#menu"),f.$menuToEdit=g("#menu-to-edit"),f.$spinner=f.$el.find(".spinner"),f.$submit=f.$el.find("#submit-mlp-language"),f.model=c.model,f.listenTo(f.model,"change",f.render),f.moduleSettings=c.moduleSettings,f}return f(b,a),b.prototype.sendRequest=function(a){var b={action:this.moduleSettings.action,menu:this.$menu.val(),mlp_sites:this.getSites()};b[this.moduleSettings.nonceName]=this.moduleSettings.nonce,a.preventDefault(),this.$submit.prop("disabled",!0),this.$spinner.addClass("is-active"),this.model.fetch({data:b,processData:!0})},b.prototype.getSites=function(){var a=[];return this.$languages.filter(":checked").each(function(b,c){a.push(Number(g(c).val()||0))}),a},b.prototype.render=function(){this.model.get("success")&&this.$menuToEdit.append(this.model.get("data")),this.$languages.prop("checked",!1),this.$spinner.removeClass("is-active"),this.$submit.prop("disabled",!1)},b}(Backbone.View);c["default"]=h},{}],8:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=window.jQuery,h=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];d(this,b);var f=e(this,a.call(this,c));return f.template=_.template(g("#mlp-add-new-site-template").html()||""),f.$el.find(".submit").before(f.template()),f.$language=g("#mlp-site-language"),f.$pluginsRow=g("#mlp-activate-plugins").closest("tr"),f}return f(b,a),b.prototype.adaptLanguage=function(a){var b=this.getLanguage(g(a.target));return this.$language.find('[value="'+b+'"]').length?(this.$language.val(b),!0):!1},b.prototype.getLanguage=function(a){var b=a.val();return b?b.replace("_","-"):"en-US"},b.prototype.togglePluginsRow=function(a){this.$pluginsRow.toggle(0<g(a.target).val())},b}(Backbone.View);c["default"]=h},{}],9:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=window.jQuery,h=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];d(this,b);var f=e(this,a.call(this,c));return f.$selects=f.$el.find("select"),f.isPropagating=!1,f}return f(b,a),b.prototype.propagateSelectedTerm=function(a){var b=this,c=void 0,d=void 0;this.isPropagating||(this.isPropagating=!0,c=g(a.target),d=this.getSelectedRelation(c),""!==d&&this.$selects.not(c).each(function(a,c){b.selectTerm(g(c),d)}),this.isPropagating=!1)},b.prototype.getSelectedRelation=function(a){return a.find("option:selected").data("relation")||""},b.prototype.selectTerm=function(a,b){var c=a.find('option[data-relation="'+b+'"]');c.length?a.val(c.val()):this.getSelectedRelation(a)&&a.val(a.find("option").first().val())},b}(Backbone.View);c["default"]=h},{}],10:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];d(this,b);var f=e(this,a.call(this,c));return f.moduleSettings=c.moduleSettings,f}return f(b,a),b.prototype.updateSiteLanguage=function(){this.$el.val(this.moduleSettings.locale)},b}(Backbone.View);c["default"]=g},{}]},{},[1]);